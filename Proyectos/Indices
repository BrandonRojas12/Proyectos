USE MASTER
CREATE DATABASE BDEJEMPLO_PARA_INDICES
GO
USE BDEJEMPLO_PARA_INDICES
GO
CREATE TABLE  EMPLEADO (
NO_EMP 		INT PRIMARY KEY ,
NOMBRE_EMP 	VARCHAR(50),
DIRECCION_EMP 	VARCHAR(50),
NO_CONTRATO_EMP 	CHAR(25) UNIQUE )
GO
CREATE  INDEX IND_EJEMPLO ON EMPLEADO(NOMBRE_EMP)
GO

CREATE TABLE  EMPLEADO_1 (
NO_EMP 		INT CONSTRAINT PK_NO_EMP PRIMARY KEY  CLUSTERED,
NOMBRE_EMP 	VARCHAR(50),
DIRECCION_EMP 	VARCHAR(50),
NO_CONTRATO_EMP CHAR(25) CONSTRAINT UI_NO_CONTRATO_EMP UNIQUE NONCLUSTERED )
GO

CREATE NONCLUSTERED INDEX IND_EJEMPLO ON EMPLEADO_1(NOMBRE_EMP)
GO
CREATE TABLE  ALUMNO (
	 BOLETA   char (10) NOT NULL,
	 NOMBRE_ALUMNO   varchar (50) NOT NULL,
	 DIR_ALUMNO   varchar (50) NOT NULL,
	 ESTATUS   char (10) NOT NULL,
	 NOMBRE_TUTOR   varchar (50) NULL,
	 TEL_ALUMNO   char (13) NULL,
	 PROMEDIO   float  NULL,
	 CORREO_E   varchar (50) NULL,
	 CVE_CARRERA   char (1) NOT NULL,
	 PLAN_ESTUDIOS   char (10) NOT NULL   )
GO

--2.	REALIZA UNA INSERCIÃ“N DE RENGLONES

INSERT INTO ALUMNO
(BOLETA, NOMBRE_ALUMNO, DIR_ALUMNO, ESTATUS, NOMBRE_TUTOR, TEL_ALUMNO, PROMEDIO, CORREO_E, CVE_CARRERA, PLAN_ESTUDIOS)
SELECT BOLETA, NOMBRE_ALUMNO, DIR_ALUMNO, ESTATUS, NOMBRE_TUTOR, TEL_ALUMNO, PROMEDIO, CORREO_E,CVE_CARRERA, PLAN_ESTUDIOS
FROM CE.DBO.ALUMNO
ORDER BY NOMBRE_ALUMNO DESC
--3.	EJECUTA UNA CONSULTA SOBRE LA TABLA TEMPORAL ALUMNO Y ANALIZA EL ORDEN DE LOS RENGLONES ESTAN ORDENADOS POR NOMBRE_ALUMNO PERO DESCENDENTE
SELECT * FROM ALUMNO
--4.	AHORA CREA LOS SIGUIENTES INDICES
CREATE CLUSTERED	INDEX IND_BOLETA ON ALUMNO (BOLETA)
CREATE NONCLUSTERED INDEX IND_NOMBRE_ALUMNO ON ALUMNO (NOMBRE_ALUMNO)
CREATE NONCLUSTERED INDEX IND_PROMEDIODESC ON ALUMNO (PROMEDIO DESC)
--5.	AHORA EJECUTA LA CONSULTA
		
SELECT * FROM ALUMNO
SELECT BOLETA FROM ALUMNO
SELECT NOMBRE_ALUMNO FROM ALUMNO
SELECT PROMEDIO FROM ALUMNO

DROP INDEX IND_BOLETA  ON ALUMNO

SELECT BOLETA, PROMEDIO, NOMBRE_ALUMNO FROM ALUMNO

CREATE CLUSTERED	INDEX IND_HISTORIAL_ALUMNO ON ALUMNO (PROMEDIO DESC)
CREATE NONCLUSTERED INDEX IND_CARRERA ON ALUMNO (CVE_CARRERA)
CREATE NONCLUSTERED INDEX IND_ESTATUS ON ALUMNO (ESTATUS)

SELECT * FROM ALUMNO
SELECT PROMEDIO FROM ALUMNO
SELECT CVE_CARRERA FROM ALUMNO
SELECT ESTATUS FROM ALUMNO

DROP INDEX IND_HISTORIAL_ALUMNO  ON ALUMNO
DROP INDEX IND_CARRERA  ON ALUMNO
DROP INDEX IND_ESTATUS ON ALUMNO
